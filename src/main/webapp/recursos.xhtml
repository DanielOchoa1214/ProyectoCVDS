<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Recursos de la Biblioteca</title>
    <link rel="stylesheet" href="insertRecurso.css"/>
</h:head>
<h:body>
    <div class="form-div">
        <h2 class="register-title">¿Que tipo de recurso quieres ingresar?</h2>
        <div class="form-choice-div">
            <p:commandButton class="register-btn btn" value="Libro" oncomplete="PF('saveLibro').show();"/>
            <p:commandButton class="register-btn btn" value="Portatil" oncomplete="PF('savePortatil').show();"/>
        </div>
    </div>
    <p:dialog header="Ingresa un libro" widgetVar="saveLibro" modal="true" class="reserva-popup">
        <h:form onkeypress="if (event.keyCode == 13) {return false;}">
            <label>
                Nombre del libro en biblioteca:
                <p:inputText id="nombre_libro" class="form-inputs" binding="#{bookName}"/>
            </label>
            <label>
                Autor del libro:
                <p:inputText id="autor_libro" class="form-inputs" binding="#{bookAuthor}"/>
            </label>
            <label>
                ¿Es de pasta dura?
                <p:selectBooleanButton onLabel="Si" offLabel="No" onIcon="pi pi-check" offIcon="pi pi-times" style="width:6rem" binding="#{bookHardCover}"/>
            </label>
            <label>
                Numero de paginas
                <p:inputText id="paginas_libro" class="form-inputs" binding="#{bookPages}"/>
            </label>
            <label>
                Genero del libro:
                <p:selectOneMenu value="#{libroMB.generoLibro}" >
                    <f:selectItems value="#{libroMB.generosLibro}" />
                </p:selectOneMenu>
            </label>
            <label>
                Ubicación del libro en la biblioteca:
                <p:inputText id="ubicacion_libro" class="form-inputs" binding="#{bookLocation}"/>
            </label>
            <label>
                Información sobre el libro:
                <p:inputText id="info_libro" class="form-inputs" binding="#{bookInfo}"/>
            </label>
            <label>
                Numero de libros ingresados:
                <p:inputText id="capacidad_libro" class="form-inputs" binding="#{bookCapacity}"/>
            </label>
            <label>
                Identificador del libro:
                <p:inputText id="id_libro" class="form-inputs" binding="#{bookId}" validatorMessage="El id debe tener 3 letras separadas por un guion seguido de 3 números :(">
                    <f:validateRegex pattern="^[A-Z]{3}-[0-9]{3}$"/>
                </p:inputText>
            </label>
            <p:messages class="message-error">
                <p:autoUpdate/>
            </p:messages>
            <label>
                Hora de inicio de horario de reservas:
                <p:inputText id="horario_inicio_libro" class="form-inputs" binding="#{bookBookingScheduleStart}"/>
            </label>
            <label>
                Hora de fin de horario de reservas:
                <p:inputText id="horario_fin_libro" class="form-inputs" binding="#{bookBookingScheduleEnd}"/>
            </label>
            <label>
                Estado del libro:
                <p:selectOneMenu value="#{libroMB.estadoRecurso}" >
                    <f:selectItems value="#{libroMB.estadosRecurso}" />
                </p:selectOneMenu>
            </label>
            <p:commandButton class="register-btn btn" value="Registrar" action="#{libroMB.saveLibro(bookName.value, bookLocation.value, bookCapacity.value, bookId.value, bookInfo.value, bookBookingScheduleStart.value, bookBookingScheduleEnd.value, bookAuthor.value, bookHardCover.value, bookPages.value)}"/>
        </h:form>
    </p:dialog>
    <p:dialog header="Ingresa un portatil" widgetVar="savePortatil" modal="true" class="reserva-popup">
        <h:form onkeypress="if (event.keyCode == 13) {return false;}">
            <label>
                Nombre del portatil en biblioteca:
                <p:inputText id="nombre_portatil" class="form-inputs" binding="#{laptopName}"/>
            </label>
            <label>
                Modelo de la RAM:
                <p:inputText id="RAM_model_portatil" class="form-inputs" binding="#{laptopRAM}"/>
            </label>
            <label>
                Modelo del disco duro:
                <p:inputText id="hard_drive_model_portatil" class="form-inputs" binding="#{laptopHardDrive}"/>
            </label>
            <label>
                Modelo del procesador:
                <p:inputText id="processor_model_portatil" class="form-inputs" binding="#{laptopProcessor}"/>
            </label>
            <label>
                Resolucion de la pantalla:
                <p:inputText id="screen_resolution_portatil" class="form-inputs" binding="#{laptopScreenResolution}"/>
            </label>
            <label>
                Marca del portatil:
                <p:inputText id="brand_portatil" class="form-inputs" binding="#{laptopBrand}"/>
            </label>
            <label>
                Información sobre el portatil:
                <p:inputText id="info_portatil" class="form-inputs" binding="#{laptopInfo}"/>
            </label>
            <label>
                Numero de portatil ingresados:
                <p:inputText id="capacidad_portatil" class="form-inputs" binding="#{laptopCapacity}"/>
            </label>
            <label>
                Identificador del portatil:
                <p:inputText id="id_portatil" class="form-inputs" binding="#{laptopId}" validatorMessage="El id debe tener 3 letras separadas por un guion seguido de 3 números :(">
                    <f:validateRegex pattern="^[A-Z]{3}-[0-9]{3}$"/>
                </p:inputText>
            </label>
            <p:messages class="message-error">
                <p:autoUpdate/>
            </p:messages>
            <label>
                Hora de inicio de horario de reservas:
                <p:inputText id="horario_inicio_portatil" class="form-inputs" binding="#{laptopBookingScheduleStart}"/>
            </label>
            <label>
                Hora de fin de horario de reservas:
                <p:inputText id="horario_fin_portatil" class="form-inputs" binding="#{laptopBookingScheduleEnd}"/>
            </label>
            <label>
                Estado del portatil:
                <p:selectOneMenu value="#{portatilMB.estadoRecurso}" >
                    <f:selectItems value="#{portatilMB.estadosRecurso}" />
                </p:selectOneMenu>
            </label>
            <p:commandButton class="register-btn btn" value="Registrar" action="#{portatilMB.savePortatil(laptopName.value, laptopCapacity.value, laptopId.value, laptopInfo.value, laptopBookingScheduleStart.value, laptopBookingScheduleEnd.value, laptopRAM.value, laptopHardDrive.value, laptopProcessor.value, laptopScreenResolution.value, laptopBrand.value)}"/>
        </h:form>
    </p:dialog>
    <h:form>
        <div class="search-div form-div">
            <h1 class="register-title">Busca un recurso en biblioteca</h1>
            <p:inputText id="busqueda_recurso" class="search-input" binding="#{resourceSearch}"/>
            <label>
                Tipo del recurso:
                <p:selectOneMenu value="#{libroMB.tipoBusqueda}">
                    <f:selectItems value="#{libroMB.tiposBusqueda}" />
                </p:selectOneMenu>
            </label>
            <label>
                [OPCIONAL] Ubicación del recurso en la biblioteca:
                <p:inputText id="ubicacion_busqueda_recurso" class="form-inputs" binding="#{locationSearch}"/>
            </label>
            <label>
                [OPCIONAL] Numero de recursos ingresados:
                <p:inputText id="capacidad_busqueda_recurso" class="form-inputs" binding="#{capacitySearch}"/>
            </label>
            <p:commandButton class="register-btn btn" action="#{libroMB.loadLibro(resourceSearch.value, libroMB.tipoBusqueda, locationSearch.value, capacitySearch.value)}" oncomplete="buscarPortatiles()" value="Buscar"/>
            <p:remoteCommand name="buscarPortatiles" update="@form" action="#{portatilMB.loadPortatil(resourceSearch.value, libroMB.tipoBusqueda, locationSearch.value, capacitySearch.value)}"/>
            <p:dataTable id="Libros" var="libro" value="#{libroMB.getSearchedLibros()}" rendered="#{libroMB.isSearchingBooks()}">
                <f:facet name="header">
                    Libros encontrados en la biblioteca
                </f:facet>
                <p:column headerText="Nombre">
                    <h:outputText value="#{libro.getName()}"/>
                </p:column>
                <p:column headerText="Autor">
                    <h:outputText value="#{libro.getAuthor()}"/>
                </p:column>
                <p:column headerText="Genero">
                    <h:outputText value="#{libro.getGenero()}"/>
                </p:column>
                <p:column headerText="Ubicacion">
                    <h:outputText value="#{libro.getLocation()}"/>
                </p:column>
                <p:column headerText="Identificador">
                    <h:outputText value="#{libro.getId()}"/>
                </p:column>
                <p:column headerText="Cantidad">
                    <h:outputText value="#{libro.getCapacity()}"/>
                </p:column>
                <p:column headerText="Reservar">
                    <p:commandButton class="register-btn btn" value="Reservar" disabled="#{libro.notAvailableForBooking()}"/>
                </p:column>
            </p:dataTable>
            <p:dataTable id="Portatiles" var="portatil" value="#{portatilMB.getSearchedPortatiles()}" rendered="#{portatilMB.isSearchingPortatiles()}">
                <f:facet name="header">
                    Portatiles encontrados en la biblioteca
                </f:facet>
                <p:column headerText="Nombre">
                    <h:outputText value="#{portatil.getName()}"/>
                </p:column>
                <p:column headerText="Marca">
                    <h:outputText value="#{portatil.getBrand()}"/>
                </p:column>
                <p:column headerText="Procesador">
                    <h:outputText value="#{portatil.getProcessor()}"/>
                </p:column>
                <p:column headerText="RAM">
                    <h:outputText value="#{portatil.getRam()}"/>
                </p:column>
                <p:column headerText="Resolucion de la pantalla">
                    <h:outputText value="#{portatil.getScreenResolution()}"/>
                </p:column>
                <p:column headerText="Ubicacion">
                    <h:outputText value="#{portatil.getLocation()}"/>
                </p:column>
                <p:column headerText="Identificador">
                    <h:outputText value="#{portatil.getId()}"/>
                </p:column>
                <p:column>
                    <p:commandButton class="register-btn btn" value="Reservar" disabled="#{portatil.notAvailableForBooking()}"/>
                </p:column>
            </p:dataTable>
        </div>
    </h:form>
</h:body>
</html>
